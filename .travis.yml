---

services:
    - docker

addons:
  apt:
    update: true

install:
  - docker build -f docker/Dockerfile  -t europython/epcon:$TRAVIS_COMMIT -t europython/epcon:latest .

script: 
  - docker run europython/epcon:$TRAVIS_COMMIT tests

deploy:
  provider: script
  script: scripts/docker_push.sh
  on:
    branch: dev/ep2019
    repo: EuroPython/epcon
    tags: false
